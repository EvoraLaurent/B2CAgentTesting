<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My GitHub Page</title>
    <!-- Add CSP headers that match Salesforce's requirements -->
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' www.jpwindustries.com *.www.jpwindustries.com jpw--agentforce--c.sandbox.vf.force.com https://stage.jettools.com https://jpw-catalog-qa-b2c-6.corevist.cloud connectc.jpwindustries.com *.connectc.jpwindustries.com jpw-catalog-qa-b2c-6.corevist.cloud *.jettools.com *.corevist.cloud">
</head>
<body>
    <h1>Welcome to My GitHub Page</h1>
    <p>This is a sample page with a script.</p>
    <script type='text/javascript'>
    function initEmbeddedMessaging() {
        try {
            // Add check for domain compatibility
            const currentDomain = window.location.hostname;
            const allowedDomains = [
                'www.jpwindustries.com',
                'stage.jettools.com',
                'jpw-catalog-qa-b2c-6.corevist.cloud',
                'connectc.jpwindustries.com'
                // Add other allowed domains as needed
            ];

            if (!allowedDomains.some(domain => currentDomain.endsWith(domain))) {
                console.error('Domain not authorized to embed Salesforce content');
                return;
            }

            embeddedservice_bootstrap.settings.language = 'en_US';
            
            embeddedservice_bootstrap.init(
                '00DcX000001g9cb',
                'B2C_Agent',
                'https://jpw--agentforce.sandbox.my.site.com/ESWB2CAgent1737056033633',
                {
                    scrt2URL: 'https://jpw--agentforce.sandbox.my.salesforce-scrt.com'
                }
            );
        } catch (err) {
            console.error('Error loading Embedded Messaging: ', err);
            // Add visible error message for users
            const errorDiv = document.createElement('div');
            errorDiv.style.color = 'red';
            errorDiv.innerHTML = 'Unable to load messaging service. Please try again later.';
            document.body.appendChild(errorDiv);
        }
    }
    </script>
    <script type='text/javascript' src='https://jpw--agentforce.sandbox.my.site.com/ESWB2CAgent1737056033633/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>
